"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mapMustGet = exports.mapGetOrCreate = void 0;
/**
 * Get a value from a map-like object if present, or create the value if missing.
 * @param map map-like object
 * @param key key
 * @param create produce a value if missing
 * @returns existing or newly-created value
 */
function mapGetOrCreate(map, key, create) {
    if (map.has(key)) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        return { value: map.get(key), created: false };
    }
    const value = create();
    map.set(key, value);
    return { value, created: true };
}
exports.mapGetOrCreate = mapGetOrCreate;
function mapMustGet(map, key) {
    if (!map.has(key)) {
        throw new Error(`Missing key ${key}`);
    }
    return map.get(key);
}
exports.mapMustGet = mapMustGet;
//# sourceMappingURL=map.js.map